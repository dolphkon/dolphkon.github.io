<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="kotlin 学习教程（四）|面向对象, 半夏薄荷澜">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>kotlin 学习教程（四）|面向对象 | 半夏薄荷澜</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.2.0"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">半夏薄荷澜</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="" class="waves-effect waves-light">

      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/categories/%E6%8A%80%E6%9C%AF/">
          
          <i class="fas fa-desktop" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>技术</span>
        </a>
      </li>
      
      <li>
        <a href="/categories/%E7%94%9F%E6%B4%BB/">
          
          <i class="fas fa-coffee" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>生活</span>
        </a>
      </li>
      
      <li>
        <a href="/categories/%E5%B7%A5%E5%85%B7/">
          
          <i class="fas fa-wrench" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>工具</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="" class="waves-effect waves-light">

      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/about">
          
          <i class="fas fa-user" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>关于我</span>
        </a>
      </li>
      
      <li>
        <a href="/profile">
          
          <i class="fas fa-address-card" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>个人简介</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="" class="waves-effect waves-light">

      
      <i class="fas fa-list" style="zoom: 0.6;"></i>
      
      <span>菜单</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/movies">
          
          <i class="fas fa-film" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>电影</span>
        </a>
      </li>
      
      <li>
        <a href="/books">
          
          <i class="fas fa-book" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>书单</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">半夏薄荷澜</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-bookmark"></i>
			
			分类
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/categories/%E6%8A%80%E6%9C%AF/ " style="margin-left:75px">
				  
				   <i class="fa fas fa-desktop" style="position: absolute;left:50px" ></i>
			      
		          <span>技术</span>
                  </a>
                </li>
              
                <li>

                  <a href="/categories/%E7%94%9F%E6%B4%BB/ " style="margin-left:75px">
				  
				   <i class="fa fas fa-coffee" style="position: absolute;left:50px" ></i>
			      
		          <span>生活</span>
                  </a>
                </li>
              
                <li>

                  <a href="/categories/%E5%B7%A5%E5%85%B7/ " style="margin-left:75px">
				  
				   <i class="fa fas fa-wrench" style="position: absolute;left:50px" ></i>
			      
		          <span>工具</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-user-circle"></i>
			
			关于
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/about " style="margin-left:75px">
				  
				   <i class="fa fas fa-user" style="position: absolute;left:50px" ></i>
			      
		          <span>关于我</span>
                  </a>
                </li>
              
                <li>

                  <a href="/profile " style="margin-left:75px">
				  
				   <i class="fa fas fa-address-card" style="position: absolute;left:50px" ></i>
			      
		          <span>个人简介</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-list"></i>
			
			菜单
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/movies " style="margin-left:75px">
				  
				   <i class="fa fas fa-film" style="position: absolute;left:50px" ></i>
			      
		          <span>电影</span>
                  </a>
                </li>
              
                <li>

                  <a href="/books " style="margin-left:75px">
				  
				   <i class="fa fas fa-book" style="position: absolute;left:50px" ></i>
			      
		          <span>书单</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/8.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">kotlin 学习教程（四）|面向对象</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/kotlin/">
                                <span class="chip bg-color">kotlin</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E6%8A%80%E6%9C%AF/" class="post-category">
                                技术
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2020-10-09
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2020-10-09
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    4.1k
                </div>
                

                

                
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h5 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h5><p>我们都知道，Java是一种面向对象编程语言，在 Java 中，万物皆对象。其实，kotlin 也是一门面向对象编程的语言。类为某一系列对象的统称，我们通过对象来完成某些事情，那么，在 kotlin 中，我们是如何面向对象编程的呢？今天我们一起来学习。</p>
<h5 id="1-如何声明一个类"><a href="#1-如何声明一个类" class="headerlink" title="1.如何声明一个类"></a>1.如何声明一个类</h5><h6 id="1-1-声明普通类"><a href="#1-1-声明普通类" class="headerlink" title="1.1 声明普通类"></a>1.1 声明普通类</h6><pre class="line-numbers language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> 类名&amp;#<span class="token number">123</span><span class="token punctuation">;</span>
<span class="token operator">..</span><span class="token operator">..</span> <span class="token comment" spellcheck="true">// 代码块</span>

&amp;#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>在 java中，允许创建子类并重写父类的任意方法，除非显示使用了 final 关键字进行标注。</p>
<p>而在 kotlin 中，我们创建一个类，默认是 final的，也就是说不能被继承，而且类中所有的方法也都是 final 的，那么在 kotlin 中我想实现继承父类及其方法怎么办呢？代码如下：</p>
<pre><code>open class HelloLanguage &#123;
  open  fun type():String&#123;
        return &quot;我是一门语言&quot;
    &#125;
     class HelloKotlin: HelloLanguage() &#123;

         override fun type(): String &#123;
             return &quot;我是 kotlin&quot;
         &#125;
    &#125;
&#125;

fun main(args: Array&lt;String&gt;) &#123;
    println(HelloLanguage.HelloKotlin().type())
&#125;</code></pre>
<p>运行结果：</p>
<p><img src="https://pic3.superbed.cn/item/5df9ddc876085c32898d42a0.png"></p>
<p>我们需要使用 kotlin 中的关键字open，将需要被继承的父类加上open即可被继承，如果重写父类的方法，也需要加上open。表示可以被继承或者重写。</p>
<h6 id="1-2-声明构造函数"><a href="#1-2-声明构造函数" class="headerlink" title="1.2 声明构造函数"></a>1.2 声明构造函数</h6><pre><code>class HelloLanguage(var name:String)&#123;
    override fun toString(): String &#123;
        return &quot;$name&quot;
    &#125;
&#125;

fun main(args: Array&lt;String&gt;) &#123;
   println(HelloLanguage(&quot;kotlin&quot;))

&#125;</code></pre>
<p>运行结果如下:</p>
<img src="https://pic3.superbed.cn/item/5df9e0be76085c32898dd4ac.png">

<p>在kotlin中，我们可以在声明类的同时指定该类的构造函数，在类的后面使用括号包含构造函数的参数列表。</p>
<p>在以上程序中，我们定义了HelloLanguage类，并指定了构造方法，在运行程序时输出 kotlin。</p>
<h6 id="1-3声明抽象类及接口"><a href="#1-3声明抽象类及接口" class="headerlink" title="1.3声明抽象类及接口"></a>1.3声明抽象类及接口</h6><ul>
<li><p>什么是抽象类?</p>
<p>抽象类对应于具体的类,在具体的类中，我们定义一个类及其方法，通过方法来具体的实现或完成某个任务。而在抽象类中，我们可以定义某个抽象类及其方法，方法可以静态也可以不是静态，但如果是静态，则子类<strong>必须要重写</strong>父类的方法，如果不是静态，在子类继承且想重写时需加上open ，表示<strong>可以被重写</strong>。</p>
<pre><code>abstract class HelloLanguage&#123;
     abstract  fun type()
    class HelloKotlin: HelloLanguage() &#123;
        override fun type() &#123;
            println(&quot;kotlin&quot;)
        &#125;
    &#125;
&#125;
fun main(args: Array&lt;String&gt;) &#123;
    HelloLanguage.HelloKotlin().type()
&#125;</code></pre>
<p>运行结果如下：</p>
<p><img src="https://pic1.superbed.cn/item/5df9e0be76085c32898dd4ac.png"></p>
</li>
</ul>
<p>以上代码还等同于:</p>
<pre><code>abstract class HelloLanguage&#123;
     fun type()&#123;
        println(&quot;kotlin&quot;)
    &#125;
    class HelloKotlin:HelloLanguage()&#123;

    &#125;

&#125;
fun main(args: Array&lt;String&gt;) &#123;
    HelloLanguage.HelloKotlin().type()
&#125;</code></pre>
<ul>
<li>什么是接口<ul>
<li>接口是一种比抽象类更加抽象的“类”，它的本身不是类，并不能被实例化。</li>
<li>接口中的方法默认为抽象的，如果实现了该接口，则必须要实现接口的所有抽象方法；如果接口的方法为普通方法，则可不必重写该方法。</li>
<li>Kotlin与Java一样，不支持同时继承多个父类，但可以同时实现多个接口</li>
</ul>
</li>
</ul>
<p>代码如下:</p>
<pre><code>interface HelloLanguage &#123;
    fun name()
    fun type() &#123;
        println(&quot;language&quot;)
    &#125;

    class HelloKotlin : HelloLanguage &#123;
        override fun name() &#123;
            println(&quot;kotlin&quot;)
        &#125;

    &#125;
&#125;

fun main(args: Array&lt;String&gt;) &#123;
    HelloLanguage.HelloKotlin().name()    // 默认的name()为抽象方法，则子类继承该抽象类必须要重写name()
    HelloLanguage.HelloKotlin().type()    //  type()为普通方法（已经实现了），抽象类中的普通方法子类可以直接调用。

&#125;</code></pre>
<p>运行结果如下：</p>
<p><img src="https://pic3.superbed.cn/item/5df9ed2e76085c328990602c.png"></p>
<p>重点总结一下:</p>
<p>对于普通类，它们方法默认为 final 的，如果子类想要重写则必须要在父类及其方法前加上open 关键字</p>
<p>对于接口和抽象类，如果它们的方法为抽象的，则子类在继承的同时<strong>必须要重写</strong>父类所有抽象方法，如果不是抽象 的则可以直接调用。</p>
<p><img src="https://pic2.superbed.cn/item/5df9f1f076085c32899117b4.png"></p>
<h6 id="1-4-继承类"><a href="#1-4-继承类" class="headerlink" title="1.4 继承类"></a>1.4 继承类</h6><p>由以上示例代码可知，在kotlin中，我们通过冒号:来连接子类和父类，表示该类继承于某父类；语法格式为:</p>
<pre><code>open class 父类&#123;
   ...  //代码块

    class 子类:父类()&#123;
        ...   //代码块
    &#125;
&#125;</code></pre>
<h6 id="2-5-实现一个接口"><a href="#2-5-实现一个接口" class="headerlink" title="2.5 实现一个接口"></a>2.5 实现一个接口</h6><p>实现接口也是通过冒号来连接，<strong>但是接口名后无括号</strong>，这也是和继承类的写法区别。语法格式为:</p>
<pre><code>interface 父类 &#123;
   ...  //代码块
    class 子类 : 父类 &#123;
        ...   //代码块  
    &#125;
&#125;</code></pre>
<h5 id="2-object对象"><a href="#2-object对象" class="headerlink" title="2.object对象"></a>2.object对象</h5><p>在 Java 中，我们为了保证系统中一个类只有一个实例，我们使用了单例模式，那些在kotlin中，我们如何保证系统中一个类只有一个实例呢？</p>
<h6 id="2-1-object声明单例对象"><a href="#2-1-object声明单例对象" class="headerlink" title="2.1 object声明单例对象"></a>2.1 object声明单例对象</h6><p>我们可以使用 object来声明object单例对象。代码以一个项目中网络层封装时获取Retrofit实例为例，代码如下：</p>
<pre><code>package com.example.kongdexi.wanandroidclient.network.api
import com.example.kongdexi.wanandroidclient.app.MyApplication
import com.example.kongdexi.wanandroidclient.constant.Constant
import com.example.kongdexi.wanandroidclient.interceptor.CacheInterceptor
import com.example.kongdexi.wanandroidclient.interceptor.DataEncryptInterceptor
import com.example.kongdexi.wanandroidclient.interceptor.HeaderInterceptor
import com.example.kongdexi.wanandroidclient.interceptor.SaveCookieInterceptor
import okhttp3.Cache
import okhttp3.OkHttpClient
import okhttp3.logging.HttpLoggingInterceptor
import retrofit2.Retrofit
import retrofit2.adapter.rxjava2.RxJava2CallAdapterFactory
import retrofit2.converter.gson.GsonConverterFactory
import java.io.File
import java.util.concurrent.TimeUnit

object  RetrofitClient &#123;
    val service: BaseApiService by lazy &#123; getRetrofit().create(BaseApiService::class.java) &#125;

    val DEFAULT_TIMEOUT: Int = 60
    //日志拦截器
    var httpLoggingInterceptor = HttpLoggingInterceptor().setLevel(HttpLoggingInterceptor.Level.BODY)

    //设置 请求的缓存的大小跟位置
    val cacheFile = File(MyApplication.context.cacheDir, &quot;cache&quot;)
    val cache = Cache(cacheFile, Constant.MAX_CACHE_SIZE)
    fun getOkHttpClient(): OkHttpClient &#123;
        return OkHttpClient.Builder()
                .addInterceptor(DataEncryptInterceptor())
                .addInterceptor(HeaderInterceptor())
                .addInterceptor(SaveCookieInterceptor())
                .addInterceptor(CacheInterceptor())
                .cache(cache)
                .connectTimeout(DEFAULT_TIMEOUT.toLong(), TimeUnit.SECONDS)
                .writeTimeout(DEFAULT_TIMEOUT.toLong(), TimeUnit.SECONDS)
                .readTimeout(DEFAULT_TIMEOUT.toLong(), TimeUnit.SECONDS)
                .retryOnConnectionFailure(true) // 错误重连
                .build()
    &#125;

   fun getRetrofit():Retrofit&#123;
      // 获取retrofit的实例
      return Retrofit.Builder()
              .baseUrl(Config.BASE_URL)  //自己配置
              .client(getOkHttpClient())
              .addCallAdapterFactory(RxJava2CallAdapterFactory.create())
              .addConverterFactory(GsonConverterFactory.create())
              .build()
  &#125;
&#125;</code></pre>
<p>以上代码通过 object声明了RetrofitClient的单例对象，在项目中有且仅有一个RetrofitClient实例。</p>
<h6 id="2-2-伴生对象"><a href="#2-2-伴生对象" class="headerlink" title="2.2 伴生对象"></a>2.2 伴生对象</h6><p>在 Java 中，有静态属性和方法，以及静态代码块，而 kotlin 中则没有，但是却通过关键字companion object提供了伴生对象。代码如下:</p>
<pre class="line-numbers language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> HelloLanguage&amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">companion</span> <span class="token keyword">object</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">fun</span> <span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"I am a language"</span><span class="token punctuation">)</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">></span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    HelloLanguage<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment" spellcheck="true">//Kotlin 取消了关键字static，也就无法直接声明静态成员，所以引入了伴生对象这个概念，可以理解为“影子”</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行结果如下:</p>
<p><img src="https://pic2.superbed.cn/item/5dfa10b176085c32899685c2.png"></p>
<p>是的，我们通过伴生对象去调用type(),不用每次都创建HelloLanguage对象，直接用类便可以调用，这也是伴生对象的好处。</p>
<h5 id="3-数据类"><a href="#3-数据类" class="headerlink" title="3.数据类"></a>3.数据类</h5><h6 id="3-1-创建数据类"><a href="#3-1-创建数据类" class="headerlink" title="3.1 创建数据类"></a>3.1 创建数据类</h6><p>在kotlin中，我们使用 data class 创建数据类，我们不用像在java中一样，写完set（）写get（），因为编译器会帮我们自动完成，我们只需要提供属性名（成员）就可以，既简洁又简单，示例代码如下：</p>
<pre><code>import java.io.Serializable
data class LoginResponse(
        val data: LoginData,
        val errorCode: Int,
        val errorMsg: String
): Serializable &#123;
    data class LoginData(
            val chapterTops: MutableList&lt;Any&gt;,
            val collectIds: List&lt;Int&gt;,
            val email: String,
            val icon: String,
            val id: Int,
            val password: String,
            val token: String,
            val type: Int,
            val username: String
    )
&#125;</code></pre>
<h6 id="3-2-数据类的语法限制"><a href="#3-2-数据类的语法限制" class="headerlink" title="3,2 数据类的语法限制"></a>3,2 数据类的语法限制</h6><ul>
<li>主构造函数至少包含一个参数；</li>
<li>参数必须标识为val或者var；</li>
<li>不能为abstract、open、sealed或者inner；</li>
<li>不能继承其他类（但可以实现接口</li>
</ul>
<h5 id="4-泛型"><a href="#4-泛型" class="headerlink" title="4. 泛型"></a>4. 泛型</h5><blockquote>
<ul>
<li>泛型，即 “参数化类型”，就是说将类型参数化，这样，在创建实例的时候，我们可以通过指定不同的参数来创建我们需要的不同的类,为类型安全提供保证，消除类型强转的烦恼</li>
<li>泛型可以用在类，接口，方法上</li>
</ul>
</blockquote>
<h6 id="4-1-泛型类"><a href="#4-1-泛型类" class="headerlink" title="4.1 泛型类"></a>4.1 泛型类</h6><p>示例代码如下：</p>
<pre class="line-numbers language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> HelloKotlin<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span>t<span class="token operator">:</span>T<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
   <span class="token keyword">var</span> value<span class="token operator">=</span>t
&amp;#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">></span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
  <span class="token keyword">val</span> kotlinString<span class="token operator">=</span>HelloKotlin<span class="token operator">&lt;</span>String<span class="token operator">></span><span class="token punctuation">(</span><span class="token string">"I am kotlin"</span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> kotlinInt<span class="token operator">=</span>HelloKotlin<span class="token operator">&lt;</span>Int<span class="token operator">></span><span class="token punctuation">(</span><span class="token number">666666</span><span class="token punctuation">)</span>

    <span class="token function">println</span><span class="token punctuation">(</span>kotlinString<span class="token punctuation">.</span>value<span class="token punctuation">)</span>

    <span class="token function">println</span><span class="token punctuation">(</span>kotlinInt<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行结果:</p>
<p><img src="https://pic3.superbed.cn/item/5dfaea3776085c3289ba6ebd.png"></p>
<p>如代码所示，在上面程序中，我们创建了 HelloKotlin的泛型类并指定其构造函数在HelloKotlin（t:T）,在我们创建实例的时候，通过指定的泛型参数创建了Sring和Int类型的对象，同时在创建的时候分别给其属性value赋不同类型的值。</p>
<h6 id="4-2-泛型方法"><a href="#4-2-泛型方法" class="headerlink" title="4.2 泛型方法"></a>4.2 泛型方法</h6><p>kotlin中的泛型函数的声明和 Java 相同，类型参数要放在函数名的前面,代码如下：</p>
<pre class="line-numbers language-kotlin"><code class="language-kotlin"><span class="token keyword">class</span> HelloKotlin<span class="token operator">&lt;</span>T<span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>

    <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token function">sayKotlin</span><span class="token punctuation">(</span>value<span class="token operator">:</span> T<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token function">println</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">></span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">val</span> helloKotlin<span class="token operator">=</span>HelloKotlin<span class="token operator">&lt;</span>String<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    helloKotlin<span class="token punctuation">.</span><span class="token function">sayKotlin</span><span class="token punctuation">(</span><span class="token string">"沉迷 kotlin，无法自拔"</span><span class="token punctuation">)</span>
    helloKotlin<span class="token punctuation">.</span><span class="token function">sayKotlin</span><span class="token punctuation">(</span><span class="token number">9898666</span><span class="token punctuation">)</span>
&amp;#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行结果如下：</p>
<p><img src="https://pic.superbed.cn/item/5dfaef2d76085c3289bb476d.png"></p>
<p>上面程序中，我们声明了泛型类 HelloKotlin<T> 以及泛型函数sayKotlin(value: T)，在创建对象实例和调用函数时指定不同类型的参数。最终输出 String 类型的”沉迷 kotlin，无法自拔”的字符串以及 Int 整型的 9898666 数字.</p>
<h6 id="4-3-泛型约束"><a href="#4-3-泛型约束" class="headerlink" title="4.3 泛型约束"></a>4.3 泛型约束</h6><p>泛型约束是用来约束一个给定参数允许使用的类型。我们知道，我们可以通过泛型创建不同类型的实例对象，但是假如我们只想要创建一定区域内的类型呢？这个时候，泛型约束就来了，它表示允许我们创建和使用的类型。</p>
<p>Kotlin 中使用 : 对泛型的类型上限进行约束，示例代码以MVP架构项目中封装 P层代码为例：</p>
<ul>
<li>接口 IBaseView</li>
</ul>
<pre class="line-numbers language-kotlin"><code class="language-kotlin"><span class="token keyword">interface</span> IBaseView &amp;#<span class="token number">123</span><span class="token punctuation">;</span>

  <span class="token comment" spellcheck="true">/**
   * 显示加载
   */</span>
  <span class="token keyword">fun</span> <span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment" spellcheck="true">/**
   * 隐藏加载
   */</span>
  <span class="token keyword">fun</span> <span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment" spellcheck="true">/**
   * 使用默认的样式显示信息: CustomToast
   */</span>
  <span class="token keyword">fun</span> <span class="token function">showDefaultMsg</span><span class="token punctuation">(</span>msg<span class="token operator">:</span> String<span class="token punctuation">)</span>

  <span class="token comment" spellcheck="true">/**
   * 显示信息
   */</span>
  <span class="token keyword">fun</span> <span class="token function">showMsg</span><span class="token punctuation">(</span>msg<span class="token operator">:</span> String<span class="token punctuation">)</span>

  <span class="token comment" spellcheck="true">/**
   * 显示错误信息
   */</span>
  <span class="token keyword">fun</span> <span class="token function">showError</span><span class="token punctuation">(</span>errorMsg<span class="token operator">:</span> String<span class="token punctuation">)</span>

&amp;#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>接口 IPresenter</li>
</ul>
<pre><code>interface IPresenter&lt;in V: IBaseView&gt; &#123;

    fun attachView(mRootView: V)

    fun detachView()

&#125;</code></pre>
<ul>
<li>泛型接口 BasePresenter</li>
</ul>
<pre class="line-numbers language-kotlin"><code class="language-kotlin"><span class="token keyword">open</span> <span class="token keyword">class</span> BasePresenter<span class="token operator">&lt;</span>T <span class="token operator">:</span> T <span class="token operator">:</span> IBaseView<span class="token operator">></span> <span class="token operator">:</span> IPresenter<span class="token operator">&lt;</span>T<span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> mRootView<span class="token operator">:</span> T<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span>
        <span class="token keyword">private</span> <span class="token keyword">set</span>

    <span class="token keyword">private</span> <span class="token keyword">var</span> compositeDisposable <span class="token operator">=</span> <span class="token function">CompositeDisposable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>


    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">attachView</span><span class="token punctuation">(</span>mRootView<span class="token operator">:</span> T<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mRootView <span class="token operator">=</span> mRootView
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">detachView</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        mRootView <span class="token operator">=</span> <span class="token keyword">null</span>

        <span class="token comment" spellcheck="true">//保证activity结束时取消所有正在执行的订阅</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>compositeDisposable<span class="token punctuation">.</span>isDisposed<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            compositeDisposable<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">val</span> isViewAttached<span class="token operator">:</span> Boolean
        <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> mRootView <span class="token operator">!=</span> <span class="token keyword">null</span>

    <span class="token keyword">fun</span> <span class="token function">checkViewAttached</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isViewAttached<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token function">MvpViewNotAttachedException</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">fun</span> <span class="token function">addSubscription</span><span class="token punctuation">(</span>disposable<span class="token operator">:</span> Disposable<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        compositeDisposable<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>disposable<span class="token punctuation">)</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">class</span> MvpViewNotAttachedException <span class="token keyword">internal</span> <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">RuntimeException</span><span class="token punctuation">(</span><span class="token string">"Please call IPresenter.attachView(IBaseView) before"</span> <span class="token operator">+</span> <span class="token string">" requesting data to the IPresenter"</span><span class="token punctuation">)</span>

&amp;#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在上面代码中，泛型类 BasePresenter 的泛型参数T : IBaseView 就是泛型约束， T必须是 IBaseView 的子类。</p>
<h5 id="5-委托"><a href="#5-委托" class="headerlink" title="5.委托"></a>5.委托</h5><h6 id="5-1-类委托"><a href="#5-1-类委托" class="headerlink" title="5.1 类委托"></a>5.1 类委托</h6><p>委托就是说某个类想要实现一些方法/属性，可以借用其他已经实现了该方法/属性的类的对象来作为自己的实现。</p>
<ul>
<li>委托类:其方法不用我们去实现，可以借助被委托类的对象来实现</li>
<li>被委托类:该类拥有方法/属性的具体实现</li>
<li>如何连接：创建委托类的时候将被委类的对象作为形参传入并通过 by关键字将那些需要实现的方法或属性委托给了被委托类对象。</li>
<li>是实现继承的一种很好替代方式</li>
</ul>
<p>代码如下:</p>
<pre><code>//创建接口
interface Language &#123;
    fun type()
&#125;

// 创建被委托类
class HelloKotlin:Language&#123;
    override fun type() &#123;
        println(&quot;我是一门计算机编程语言,我叫 kotlin&quot;)
    &#125;
&#125;
// 创建委托类,委托类作为形参传入，由形参委托类对象作为委托对象
class Derived(helloKotlin: HelloKotlin):Language by helloKotlin

fun main(args: Array&lt;String&gt;) &#123;
    val helloKotlin=HelloKotlin()
    Derived(helloKotlin).type()
&#125;</code></pre>
<p>运行结果如下:</p>
<p><img src="https://pic1.superbed.cn/item/5dfb146a76085c3289c18801.png"></p>
<p>在上面的代码中，派生类 Derived想要实现  Language类的typ方法，通过关键字by 委托了 HelloKotlin类的对象来完成。</p>
<h6 id="5-2-属性委托"><a href="#5-2-属性委托" class="headerlink" title="5.2 属性委托"></a>5.2 属性委托</h6><p>属性委托就是一个类的某个属性值不是在类中直接进行定义，而是将其托付给一个代理类，从而实现对该类的属性统一管理。本质上就是 多个类的类似属性交给委托类统一实现，避免每个类都要单独重复实现一次。</p>
<p>代码如下:</p>
<pre><code>import kotlin.reflect.KProperty
class Language(var name:String)&#123;
    operator fun setValue(thisRef: Any?, property: KProperty&lt;*&gt;, value: String) &#123;
        this.name = value
    &#125;

    operator fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;): String &#123;
        return this.name
    &#125;
&#125;

class HelloKotlin&#123;
    var name: String by Language(&quot;kotlin是一门计算机编程语言&quot;)
&#125;

class HelloJava&#123;
    var name: String by Language(&quot;java 也一样&quot;)
&#125;

fun main(args: Array&lt;String&gt;) &#123;
   println(HelloKotlin().name)
    println(HelloJava().name)
&#125;</code></pre>
<p>运行结果如下:</p>
<p><img src="https://pic1.superbed.cn/item/5dfb1d5c76085c3289c2fe04.png"></p>
<p>在上面代码中，HelloKotlin 和 HelloJava 类将自己的属性 name 的实现委托给了Language来管理。</p>
<h6 id="5-3-关于委托类的委托属性的getValue、setValue形参说明"><a href="#5-3-关于委托类的委托属性的getValue、setValue形参说明" class="headerlink" title="5.3 关于委托类的委托属性的getValue、setValue形参说明"></a>5.3 关于委托类的委托属性的getValue、setValue形参说明</h6><p>（1）getValue(thisRef, property)</p>
<ul>
<li>thisRef：代表委托属性所属对象，因此thisDef类型需要与委托属性所属对象<strong>类型一致</strong>，或者是其<strong>父类</strong>，</li>
<li>property：代表目标属性，该属性必须是<strong>KProperty&lt;*&gt;类型</strong>或其<strong>父类类型</strong>；</li>
<li>返回值：返回目标属性<strong>相同的类型</strong>，或者其<strong>子类类型</strong>。</li>
</ul>
<p>（2）setValue(thisRef, property, value)</p>
<ul>
<li>thisRef：同上；</li>
<li>property：同上；</li>
<li>value：为目标属性设置的新的值，因此该值类型必须与目标属性<strong>类型一致</strong>，或者是其<strong>父类</strong></li>
</ul>
<h6 id="5-4-实战案例-属性委托"><a href="#5-4-实战案例-属性委托" class="headerlink" title="5.4 实战案例(属性委托)"></a>5.4 实战案例(<strong>属性委托</strong>)</h6><p>接下来我们通过 kotlin 委托属性和 SharedPreference来封装一个Preference 类，在项目中可以用于数据的保存和获取。代码如下:</p>
<pre class="line-numbers language-kotlin"><code class="language-kotlin"><span class="token keyword">import</span> android<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>SuppressLint
<span class="token keyword">import</span> android<span class="token punctuation">.</span>content<span class="token punctuation">.</span>Context
<span class="token keyword">import</span> android<span class="token punctuation">.</span>content<span class="token punctuation">.</span>SharedPreferences
<span class="token keyword">import</span> com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>kongdexi<span class="token punctuation">.</span>wanandroidclient<span class="token punctuation">.</span>app<span class="token punctuation">.</span>MyApplication
<span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword">import</span> kotlin<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>KProperty

<span class="token comment" spellcheck="true">/**
 * kotlin委托属性+SharedPreference实例
 */</span>
<span class="token keyword">class</span> Preference<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span><span class="token keyword">val</span> name<span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">private</span> <span class="token keyword">val</span> default<span class="token operator">:</span> T<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>

    <span class="token keyword">companion</span> <span class="token keyword">object</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">val</span> file_name <span class="token operator">=</span> <span class="token string">"wan_android_file"</span>

        <span class="token keyword">private</span> <span class="token keyword">val</span> prefs<span class="token operator">:</span> SharedPreferences <span class="token keyword">by</span> lazy &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            MyApplication<span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getSharedPreferences</span><span class="token punctuation">(</span>file_name<span class="token punctuation">,</span> Context<span class="token punctuation">.</span>MODE_PRIVATE<span class="token punctuation">)</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">/**
         * 删除全部数据
         */</span>
        <span class="token keyword">fun</span> <span class="token function">clearPreference</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            prefs<span class="token punctuation">.</span><span class="token function">edit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">/**
         * 根据key删除存储数据
         */</span>
        <span class="token keyword">fun</span> <span class="token function">clearPreference</span><span class="token punctuation">(</span>key<span class="token operator">:</span> String<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            prefs<span class="token punctuation">.</span><span class="token function">edit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">/**
         * 查询某个key是否已经存在
         *
         * @param key
         * @return
         */</span>
        <span class="token keyword">fun</span> <span class="token function">contains</span><span class="token punctuation">(</span>key<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">:</span> Boolean &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> prefs<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">/**
         * 返回所有的键值对
         *
         * @param context
         * @return
         */</span>
        <span class="token keyword">fun</span> <span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> <span class="token operator">*</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> prefs<span class="token punctuation">.</span>all
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

    operator <span class="token keyword">fun</span> <span class="token function">getValue</span><span class="token punctuation">(</span>thisRef<span class="token operator">:</span> Any<span class="token operator">?</span><span class="token punctuation">,</span> property<span class="token operator">:</span> KProperty<span class="token operator">&lt;</span><span class="token operator">*</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span> T &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">getSharedPreferences</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> default<span class="token punctuation">)</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

    operator <span class="token keyword">fun</span> <span class="token function">setValue</span><span class="token punctuation">(</span>thisRef<span class="token operator">:</span> Any<span class="token operator">?</span><span class="token punctuation">,</span> property<span class="token operator">:</span> KProperty<span class="token operator">&lt;</span><span class="token operator">*</span><span class="token operator">></span><span class="token punctuation">,</span> value<span class="token operator">:</span> T<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token function">putSharedPreferences</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token annotation builtin">@SuppressLint</span><span class="token punctuation">(</span><span class="token string">"CommitPrefEdits"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">putSharedPreferences</span><span class="token punctuation">(</span>name<span class="token operator">:</span> String<span class="token punctuation">,</span> value<span class="token operator">:</span> T<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">with</span><span class="token punctuation">(</span>prefs<span class="token punctuation">.</span><span class="token function">edit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">when</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">is</span> Long <span class="token operator">-></span> <span class="token function">putLong</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
            <span class="token keyword">is</span> String <span class="token operator">-></span> <span class="token function">putString</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
            <span class="token keyword">is</span> Int <span class="token operator">-></span> <span class="token function">putInt</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
            <span class="token keyword">is</span> Boolean <span class="token operator">-></span> <span class="token function">putBoolean</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
            <span class="token keyword">is</span> Float <span class="token operator">-></span> <span class="token function">putFloat</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
            <span class="token keyword">else</span> <span class="token operator">-></span> <span class="token function">putString</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token function">serialize</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token annotation builtin">@Suppress</span><span class="token punctuation">(</span><span class="token string">"UNCHECKED_CAST"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">getSharedPreferences</span><span class="token punctuation">(</span>name<span class="token operator">:</span> String<span class="token punctuation">,</span> default<span class="token operator">:</span> T<span class="token punctuation">)</span><span class="token operator">:</span> T <span class="token operator">=</span> <span class="token function">with</span><span class="token punctuation">(</span>prefs<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">val</span> res<span class="token operator">:</span> Any <span class="token operator">=</span> <span class="token keyword">when</span> <span class="token punctuation">(</span>default<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
            <span class="token keyword">is</span> Long <span class="token operator">-></span> <span class="token function">getLong</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> default<span class="token punctuation">)</span>
            <span class="token keyword">is</span> String <span class="token operator">-></span> <span class="token function">getString</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> default<span class="token punctuation">)</span>
            <span class="token keyword">is</span> Int <span class="token operator">-></span> <span class="token function">getInt</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> default<span class="token punctuation">)</span>
            <span class="token keyword">is</span> Boolean <span class="token operator">-></span> <span class="token function">getBoolean</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> default<span class="token punctuation">)</span>
            <span class="token keyword">is</span> Float <span class="token operator">-></span> <span class="token function">getFloat</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> default<span class="token punctuation">)</span>
            <span class="token keyword">else</span> <span class="token operator">-></span> <span class="token function">deSerialization</span><span class="token punctuation">(</span><span class="token function">getString</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token function">serialize</span><span class="token punctuation">(</span>default<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> res <span class="token keyword">as</span> T
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/**
     * 序列化对象

     * @param person
     * *
     * @return
     * *
     * @throws IOException
     */</span>
    <span class="token annotation builtin">@Throws</span><span class="token punctuation">(</span>IOException<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>A<span class="token operator">></span> <span class="token function">serialize</span><span class="token punctuation">(</span>obj<span class="token operator">:</span> A<span class="token punctuation">)</span><span class="token operator">:</span> String &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">val</span> byteArrayOutputStream <span class="token operator">=</span> <span class="token function">ByteArrayOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">val</span> objectOutputStream <span class="token operator">=</span> <span class="token function">ObjectOutputStream</span><span class="token punctuation">(</span>
                byteArrayOutputStream<span class="token punctuation">)</span>
        objectOutputStream<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
        <span class="token keyword">var</span> serStr <span class="token operator">=</span> byteArrayOutputStream<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token string">"ISO-8859-1"</span><span class="token punctuation">)</span>
        serStr <span class="token operator">=</span> java<span class="token punctuation">.</span>net<span class="token punctuation">.</span>URLEncoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>serStr<span class="token punctuation">,</span> <span class="token string">"UTF-8"</span><span class="token punctuation">)</span>
        objectOutputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        byteArrayOutputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> serStr
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/**
     * 反序列化对象

     * @param str
     * *
     * @return
     * *
     * @throws IOException
     * *
     * @throws ClassNotFoundException
     */</span>
    <span class="token annotation builtin">@Suppress</span><span class="token punctuation">(</span><span class="token string">"UNCHECKED_CAST"</span><span class="token punctuation">)</span>
    <span class="token annotation builtin">@Throws</span><span class="token punctuation">(</span>IOException<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">,</span> ClassNotFoundException<span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>A<span class="token operator">></span> <span class="token function">deSerialization</span><span class="token punctuation">(</span>str<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token operator">:</span> A &amp;#<span class="token number">123</span><span class="token punctuation">;</span>
        <span class="token keyword">val</span> redStr <span class="token operator">=</span> java<span class="token punctuation">.</span>net<span class="token punctuation">.</span>URLDecoder<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token string">"UTF-8"</span><span class="token punctuation">)</span>
        <span class="token keyword">val</span> byteArrayInputStream <span class="token operator">=</span> <span class="token function">ByteArrayInputStream</span><span class="token punctuation">(</span>
                redStr<span class="token punctuation">.</span><span class="token function">toByteArray</span><span class="token punctuation">(</span><span class="token function">charset</span><span class="token punctuation">(</span><span class="token string">"ISO-8859-1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">val</span> objectInputStream <span class="token operator">=</span> <span class="token function">ObjectInputStream</span><span class="token punctuation">(</span>
                byteArrayInputStream<span class="token punctuation">)</span>
        <span class="token keyword">val</span> obj <span class="token operator">=</span> objectInputStream<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> A
        objectInputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        byteArrayInputStream<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> obj
    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>

&amp;#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在上面代码中,SharedPreference对数据的存取我们交给了代理类 Preference 来完成。</p>
<p>假如我们想要检查用户是否登录这个标志位 isLogin，则可以通过如下代码来获取:</p>
<pre class="line-numbers language-kotlin"><code class="language-kotlin"> <span class="token keyword">protected</span> <span class="token keyword">var</span> isLogin<span class="token operator">:</span> Boolean <span class="token keyword">by</span> <span class="token function">Preference</span><span class="token punctuation">(</span>Constant<span class="token punctuation">.</span>LOGIN_KEY<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>需要设置状态时，可对isLogin直接赋值。</p>
<pre class="line-numbers language-kotlin"><code class="language-kotlin">isLogin <span class="token operator">=</span> <span class="token boolean">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h5 id="6-延迟属性-Lazy"><a href="#6-延迟属性-Lazy" class="headerlink" title="6. 延迟属性 Lazy"></a>6. 延迟属性 Lazy</h5><h6 id="6-1-lazy的使用"><a href="#6-1-lazy的使用" class="headerlink" title="6.1 lazy的使用"></a>6.1 lazy的使用</h6><p><code>lazy()</code> 是接受一个<code>lambda</code> 并返回一个 <code>Lazy &lt;T&gt;</code> 实例的函数，返回的实例可以作为实现延迟属性的委托。也就是说：</p>
<p><strong>第一次调用get() 会执行已传递给 lazy() 的 lambda 表达式并记录结果， 后续调用get() 只是返回记录的结果。</strong></p>
<p> 示例代码如下:</p>
<pre><code>val lazyValue: String by lazy &#123;
    &quot;Hello&quot;
&#125;
fun main(args: Array&lt;String&gt;) &#123;
    println(lazyValue)
&#125;</code></pre>
<p>运行结果会输出字符串 “hello”。</p>
<h6 id="6-2-lazy-和-lateinit-的区别"><a href="#6-2-lazy-和-lateinit-的区别" class="headerlink" title="6.2 lazy 和 lateinit 的区别"></a>6.2 lazy 和 lateinit 的区别</h6><ul>
<li>lazy { … }只能用于<code>val</code>属性，而<code>lateinit</code>只能用于<code>var</code></li>
<li>lazy 应用于单例模式(if-null-then-init-else-return)，而且当且仅当变量被第一次调用的时候，委托方法才会执行。</li>
<li>`lateinit 可以在任何位置初始化并且可以初始化多次。而lazy在第一次被调用时就被初始化，想要被改变只能重新定义</li>
<li>lateinit`不能用于可空属性和Java原语类型(这是因为null用于未初始化的值)</li>
</ul>

            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">半夏薄荷澜</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://www.guaguadev.com/2020/10/09/ce-shi-3/">https://www.guaguadev.com/2020/10/09/ce-shi-3/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">半夏薄荷澜</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/kotlin/">
                                    <span class="chip bg-color">kotlin</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2020/10/09/ce-shi-4/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/22.jpg" class="responsive-img" alt="kotlin 学习教程(五) |函数和函数式编程">
                        
                        <span class="card-title">kotlin 学习教程(五) |函数和函数式编程</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            前言我们知道，在程序中，通常情况下。一个类会有自己的方法(函数)以及属性，这些方法代表了该类的特性或者说具有的能力。今天我们一起来研究一下 kotlin中的函数。
1.如何声明一个函数在 kotlin 中，我们通过关键字 fun 来声明一个
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2020-10-09
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E6%8A%80%E6%9C%AF/" class="post-category">
                                    技术
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/kotlin/">
                        <span class="chip bg-color">kotlin</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2020/10/09/ce-shi-2/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/20.jpg" class="responsive-img" alt="Kotlin 学习教程之类型系统和智能类型转换（二）">
                        
                        <span class="card-title">Kotlin 学习教程之类型系统和智能类型转换（二）</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            前言
从上一篇我们了解了 kotlin 这门语言，以及通过 IntelliJ IDEA 和 AndroidStudio 开发工具创建了 kotlin 项目并运行了 “hello world” 程序，在这一篇，我们将来学习 kotlin的数据
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2020-10-09
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E6%8A%80%E6%9C%AF/" class="post-category">
                                    技术
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/kotlin/">
                        <span class="chip bg-color">kotlin</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h1, h2, h3, h4, h5, h6'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4, h5, h6').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">2020</span>
             <a href="/about" target="_blank">半夏薄荷澜</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">9.3k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <span id="sitetime">载入运行时间...</span>
            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2020";
                    var startMonth = "09";
                    var startDate = "19";
                    var startHour = "08";
                    var startMinute = "0";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/dolphkon" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:1557109691@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1557109691" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1557109691" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/search.xml", 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    
    <script>
        (function (i, s, o, g, r, a, m) {
            i["DaoVoiceObject"] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o), m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            a.charset = "utf-8";
            m.parentNode.insertBefore(a, m)
        })(window, document, "script", ('https:' == document.location.protocol ? 'https:' : 'http:') +
            "//widget.daovoice.io/widget/6984b559.js", "daovoice")
        daovoice('init', {
            app_id: ""
        });
        daovoice('update');
    </script>
    

    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
